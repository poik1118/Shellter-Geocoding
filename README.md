# 🗺️ 감정평가기관 지도 시각화 시스템

## 📋 프로젝트 개요

**주택도시보증공사**에서 선정한 **감정평가기관**들의 위치 데이터를 분석하고 지도에 시각화하는 **데이터 시각화 프로젝트**입니다.

### 🎯 프로젝트 목표
- CSV 형태의 주소 데이터를 지리좌표로 변환
- 지역별 감정평가기관 분포를 시각적으로 분석
- 인터랙티브 웹 지도로 데이터 시각화

---

## 🛠️ 기술 스택

### **Backend & Data Processing**
- **Python 3.10+** - 메인 개발 언어
- **Pandas** - 데이터 처리 및 분석
- **NumPy** - 수치 계산 및 배열 처리
- **Matplotlib** - 데이터 시각화

### **Geospatial & Mapping**
- **Folium** - 인터랙티브 지도 생성
- **GeoPy** - 지리정보 처리 및 좌표 변환
- **VWorld API** - 한국 주소 좌표 변환 서비스
- **OpenStreetMap** - 오픈소스 지도 데이터

### **Web & API**
- **Requests** - HTTP API 통신
- **Python-dotenv** - 환경변수 관리

### **Data Visualization**
- **HTML/CSS/JavaScript** - 웹 기반 지도 인터페이스
- **Choropleth Maps** - 지역별 분포도 시각화
- **Interactive Markers** - 포인트 데이터 표시

---

## 🏗️ 시스템 아키텍처

```
📁GeoCode/
├── 📄 requirements.txt               # Python 패키지 목록
├── 📁 geocoding/                     # 주소 좌표 변환 폴더
│   └── 🐍 geo.py                     # VWorld API + geopy 기반 주소 좌표 변환
├── 📁 data/                          # 데이터 폴더
│   ├── 📊 주택도시보증공사_전세보증금반환보증 선정 감정평가기관.csv  # 원본 데이터
│   └── 📊 주택도시보증공사_전세보증금반환보증_선정_정평가기관_GEO.csv # 좌표 변환된 데이터
├── 📁 map/                           # 지도 생성 폴더
│   └── 🐍 감정평가기관_지도.py        # 메인 지도 생성 파일
└── 📁 html/                          # 생성된 지도 파일 폴더
    └── 🌐 감정평가기관_지도.html      # 생성된 통합 지도 결과
```

### **핵심 모듈**

#### 1. **Geocoding Engine** (`geocoding/geo.py`)
- **VWorld API** 연동으로 정확한 한국 주소 좌표 변환
- **Fallback 시스템**: VWorld → GeoPy 순차적 처리
- **주소 정제 알고리즘**: 특수문자, 층수, 호수 자동 제거
- **에러 핸들링**: 타임아웃, 서비스 불가 상황 대응

#### 2. **Map Visualization Engine** (`map/감정평가기관_지도.py`)
- **Folium 기반** 인터랙티브 지도 생성
- **Choropleth Maps**: 지역별 기관 수 시각화
- **Real-time GeoJSON** 다운로드 및 처리
- **Multi-layer Support**: Google Maps, OpenStreetMap 등

---

## 🚀 주요 기능

### **1. 데이터 전처리 & 좌표 변환**
```python
# VWorld API 기반 정확한 좌표 변환
def get_coordinates(address):
    # 1단계: VWorld API 시도
    # 2단계: 주소 정제 후 재시도  
    # 3단계: GeoPy Fallback
    # 4단계: 에러 핸들링
```

### **2. 지역별 분포 분석**
- **정규표현식** 기반 지점현황 파싱
- **행정구역별** 기관 수 집계
- **색상 기반** 밀집도 시각화

### **3. 인터랙티브 지도**
- **Zoom/Pan** 기능
- **Layer Control**: 다양한 지도 타입
- **Popup Markers**: 상세 정보 표시
- **Responsive Design**: 모바일 대응

---

## 📊 데이터 처리 파이프라인

```
CSV 데이터 → 주소 정제 → API 좌표 변환 → 데이터 검증 → 지도 생성 → HTML 출력
```

### **데이터 플로우**
1. **Input**: `주택도시보증공사_전세보증금반환보증 선정 감정평가기관.csv` (주소 데이터)
2. **Processing**: VWorld API + GeoPy 좌표 변환
3. **Validation**: 좌표 정확도 검증
4. **Output**: `감정평가기관_지도.html` (인터랙티브 지도)

---

## 🔧 설치 및 실행

### **환경 설정**
```bash
# 1. 의존성 설치
pip install -r requirements.txt

# 2. 환경변수 설정 (.env)
VWORLD_API_KEY=your_api_key_here

# 3. 좌표 변환 실행
python geocoding/geo.py

# 4. 지도 생성 실행  
python map/감정평가기관_지도.py
```

### **실행 결과**
- **자동 브라우저 실행**: 생성된 지도 자동 열기
- **HTML 파일 생성**: `html/감정평가기관_지도.html`
- **오프라인 지원**: 인터넷 없이도 지도 사용 가능

---

## 🎨 지도 기능 설명

### 🗺️ 지도 유형 선택
우측 상단의 **레이어 컨트롤**에서 원하는 지도를 선택할 수 있습니다:

| 🎯 지도 유형 | 📝 설명 | 💡 사용 시기 |
|-------------|---------|-------------|
| **Google 일반지도** | 🏠 도로와 건물이 표시된 일반적인 지도 | 📍 정확한 주소 찾기 |
| **Google 지형지도** | 🏔️ 산과 지형이 표시된 지도 | 🏃‍♂️ 지형 파악 |
| **Google 위성지도** | 🛰️ 실제 위성 사진 | 🏢 건물 외관 확인 |
| **OpenStreetMap** | 🌍 무료 오픈소스 지도 | 💰 비용 없이 사용 |

### 🎨 분포도 색상 의미
우측 하단의 **범례**를 통해 지역별 감정평가기관 수를 확인할 수 있습니다:

| 🎨 색상 | 📊 감정평가기관 수 | 💼 의미 |
|---------|------------------|---------|
| 🔴 **진한 빨강** | 35개 이상 | 🏆 **최고 밀집 지역** |
| 🔴 **빨강** | 30-34개 | 🥇 **높은 밀집 지역** |
| 🟠 **주황** | 25-29개 | 🥈 **중상위 밀집 지역** |
| 🟠 **밝은 주황** | 20-24개 | 🥉 **중위 밀집 지역** |
| 🟡 **노랑** | 15-19개 | 📈 **보통 밀집 지역** |
| 🟡 **연한 노랑** | 10-14개 | 📊 **낮은 밀집 지역** |
| ⚪ **흰색** | 5-9개 | 📉 **매우 낮은 밀집 지역** |
| 🔵 **연한 파랑** | 5개 미만 | 🌱 **신규 진입 지역** |

---

## 🖱️ 마커 사용법

### 📍 마커 클릭
- 각 감정평가기관의 마커를 클릭하면 **상세 정보**가 표시됩니다
- 기관명, 주소, 연락처 등의 정보를 확인할 수 있습니다

### 🔍 마커 검색
- 지도를 확대/축소하여 원하는 지역의 마커를 찾을 수 있습니다
- 마우스 휠로 확대/축소, 드래그로 이동이 가능합니다

---

## 📈 기술적 성과

### **데이터 처리 성능**
- **37개 기관** 주소 데이터 처리
- **100% 좌표 변환 성공률** (Fallback 시스템)
- **실시간 GeoJSON** 다운로드 및 처리

### **시각화 품질**
- **4가지 지도 타입** 지원 (Google, OSM, Satellite, Terrain)
- **8단계 색상 구분**으로 밀집도 표현
- **반응형 디자인**으로 모든 디바이스 지원

### **시스템 안정성**
- **API Rate Limiting** 대응
- **에러 복구 메커니즘** 구현
- **데이터 검증** 및 백업 시스템

---

## 🎯 개발 주요 포인트

### **1. API 통합 및 에러 핸들링**
- **VWorld API** 연동으로 정확한 한국 주소 처리
- **Fallback 시스템**으로 서비스 안정성 확보
- **타임아웃 및 예외 처리**로 견고한 시스템 구축

### **2. 데이터 처리 및 분석**
- **Pandas** 활용한 대용량 데이터 처리
- **정규표현식** 기반 복잡한 텍스트 파싱
- **지리정보 처리** 및 좌표 변환 알고리즘

### **3. 시각화 및 UX/UI**
- **Folium** 기반 인터랙티브 지도 개발
- **Choropleth Maps**로 지역별 분포 시각화
- **반응형 웹 디자인**으로 사용성 극대화

### **4. 시스템 설계 및 아키텍처**
- **모듈화된 구조**로 유지보수성 향상
- **환경변수 관리**로 보안 강화
- **자동화된 워크플로우** 구현

---

## 🔮 향후 가능 개선 방향

### **기능 확장**
- **실시간 데이터 업데이트** 시스템
- **통계 분석 대시보드** 추가
- **모바일 앱** 개발

### **기술 개선**
- **데이터베이스 연동** (PostgreSQL + PostGIS)
- **REST API** 서버 구축
- **클라우드 배포** (AWS/GCP)

---